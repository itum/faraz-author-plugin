# راهنمای تنظیم وب‌هوک تلگرام - افزونه فراز

## معرفی

این افزونه حالا از دو نوع هاست پشتیبانی می‌کند:

### 🌍 هاست خارجی (پیش‌فرض)
- اتصال مستقیم به API تلگرام
- سرعت بالاتر
- برای سرورهای خارج از ایران

### 🇮🇷 هاست ایرانی
- استفاده از پروکسی برای دور زدن فیلتر
- مناسب برای سرورهای داخل ایران
- امکان تنظیم آدرس پروکسی سفارشی

## نحوه تنظیم

### گام 1: انتخاب نوع هاست
1. به بخش **نویسنده خودکار هوشمند > Telegram Webhook** بروید
2. نوع هاست خود را انتخاب کنید:
   - **هاست خارجی**: اگر سرور شما خارج از ایران است
   - **هاست ایرانی**: اگر سرور شما در ایران است

### گام 2: تنظیم پروکسی (فقط برای هاست ایرانی)
اگر هاست ایرانی را انتخاب کردید:
1. فیلد "آدرس پروکسی" نمایش داده می‌شود
2. آدرس پیش‌فرض: `https://arz.appwordpresss.ir/all.php`
3. می‌توانید آدرس پروکسی سفارشی خود را وارد کنید

### گام 3: تکمیل سایر فیلدها
- **شناسه چت گروه تلگرام**: شناسه گروه یا کانال مقصد
- **توکن ربات تلگرام**: توکن دریافتی از BotFather
- **آدرس وب‌هوک ربات**: آدرس endpoint وب‌هوک شما

### گام 4: ذخیره تنظیمات
پس از کلیک روی "ذخیره تنظیمات"، وب‌هوک به صورت خودکار تنظیم می‌شود.

## ابزارهای مدیریت وب‌هوک

### 🔍 بررسی وضعیت وب‌هوک
- نمایش اطلاعات کامل وب‌هوک فعلی
- فقط برای هاست خارجی در دسترس است

### 🗑️ حذف وب‌هوک
- حذف کامل وب‌هوک از تلگرام
- فقط برای هاست خارجی در دسترس است

### 📤 تست ارسال پیام
- ارسال پیام تست برای بررسی اتصال
- برای هر دو نوع هاست قابل استفاده

## نکات مهم

### برای هاست ایرانی:
- وب‌هوک از طریق پروکسی تنظیم می‌شود
- بررسی مستقیم وضعیت وب‌هوک امکان‌پذیر نیست
- حذف وب‌هوک باید از طریق مدیر پروکسی انجام شود

### برای هاست خارجی:
- تمام عملیات مستقیماً با API تلگرام انجام می‌شود
- امکان بررسی کامل وضعیت وب‌هوک
- کنترل کامل بر روی وب‌هوک

## عیب‌یابی

### مشکلات رایج:

1. **خطای "توکن نامعتبر"**
   - بررسی صحت توکن ربات
   - اطمینان از فعال بودن ربات

2. **عدم دریافت پیام‌ها**
   - بررسی صحت آدرس وب‌هوک
   - تست ارسال پیام برای بررسی اتصال

3. **خطای پروکسی (هاست ایرانی)**
   - بررسی در دسترس بودن آدرس پروکسی
   - تماس با مدیر پروکسی

### لاگ‌ها:
تمام فعالیت‌ها در فایل `telegram_logs.txt` ثبت می‌شوند.

## پشتیبانی

برای دریافت پشتیبانی:
- بررسی لاگ‌های افزونه
- ارسال جزئیات خطا به تیم پشتیبانی