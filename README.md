# پلاگین FarazAutur - مدیریت خودکار محتوا

این پلاگین وردپرس برای مدیریت خودکار محتوا از RSS feeds و ارسال آن به تلگرام طراحی شده است.

## ویژگی‌های اصلی

### 🔄 دریافت خودکار محتوا از RSS
- دریافت محتوا از RSS feeds مختلف
- استخراج متن کامل از صفحات
- دریافت تصاویر شاخص به صورت خودکار
- فیلتر کردن محتوای تکراری

### 📱 ارسال به تلگرام
- ارسال خودکار پست‌ها به کانال تلگرام
- پشتیبانی از تصاویر شاخص
- قابلیت تنظیم امضا برای پیام‌ها
- پشتیبانی از هاست‌های ایرانی و خارجی

### 🖼️ تولید هوشمند تصویر
- تولید خودکار تصاویر شاخص با Unsplash
- استخراج کلمات کلیدی از محتوا
- انتخاب تصاویر مرتبط با موضوع

### 🧹 بهینه‌سازی خودکار
- حذف پست‌های قدیمی
- پاکسازی تصاویر استفاده نشده
- مدیریت لاگ‌های قدیمی
- بهینه‌سازی پایگاه داده

## نصب و راه‌اندازی

### 1. نصب پلاگین
```bash
# کپی کردن فایل‌ها به پوشه plugins
cp -r farazautur /wp-content/plugins/
```

### 2. فعال‌سازی در وردپرس
- به بخش Plugins در پنل مدیریت بروید
- پلاگین FarazAutur را فعال کنید

### 3. تنظیمات اولیه
- تنظیم توکن تلگرام در بخش Telegram Settings
- تنظیم کلید API Unsplash در بخش Unsplash Settings
- اضافه کردن RSS feeds در بخش RSS Management

## تنظیمات

### تلگرام
- `telegram_bot_token`: توکن ربات تلگرام
- `telegram_bot_Chat_id`: شناسه کانال تلگرام
- `telegram_host_type`: نوع هاست (iranian/foreign)
- `farazautur_signature_enabled`: فعال‌سازی امضا
- `farazautur_signature_text`: متن امضا

### Unsplash
- `faraz_unsplash_api_key`: کلید API Unsplash
- `faraz_unsplash_image_resolution`: رزولوشن تصاویر

### RSS Feeds
- `stp_entries`: آرایه‌ای از RSS feeds با تنظیمات

## توابع اصلی

### `stp_check_for_new_rss_items()`
تابع اصلی برای بررسی و دریافت محتوای جدید از RSS feeds

### `fetch_full_text($url, $type, $class)`
دریافت متن کامل از URL با استفاده از کلاس و نوع مشخص شده

### `fetch_thumbnail($url)`
دریافت تصویر شاخص و تاریخ انتشار از URL

### `smart_generate_featured_image($post_id, $post_title, $post_content)`
تولید هوشمند تصویر شاخص بر اساس محتوا

### `send_telegram_photo_with_caption($photo_url, $caption, $post_id)`
ارسال تصویر با کپشن به تلگرام

## مدیریت خطا

پلاگین شامل سیستم مدیریت خطای پیشرفته است:
- لاگ کردن تمام عملیات
- ارسال خطاها به تلگرام
- بررسی وضعیت HTTP
- مدیریت خطاهای cURL

## بهینه‌سازی

### توابع کمکی
- `check_plugin_status()`: بررسی وضعیت پلاگین
- `cleanup_old_logs()`: پاکسازی لاگ‌های قدیمی
- `optimize_database()`: بهینه‌سازی پایگاه داده

### تنظیمات عملکرد
- محدودیت زمانی برای پردازش (25 ثانیه)
- محدودیت تعداد آیتم‌های RSS (4 آیتم)
- تاخیر بین درخواست‌ها (333 میکروثانیه)

## امنیت

- استفاده از `$wpdb->prepare()` برای جلوگیری از SQL Injection
- بررسی و اعتبارسنجی ورودی‌ها
- مدیریت امن فایل‌ها
- بررسی مجوزهای کاربر

## پشتیبانی

برای گزارش مشکلات یا درخواست ویژگی‌های جدید، لطفاً با توسعه‌دهنده تماس بگیرید.

## مجوز

این پلاگین تحت مجوز GPL v2 یا بالاتر منتشر شده است. 